<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sallama Dedektifi V14.4 (Buton Se癟enekli)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f0f0;
            color: #333;
            padding: 30px;
        }
        .container {
            max-width: 700px;
            margin: auto;
            background: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #e74c4c;
            text-align: center;
            border-bottom: 3px solid #e74c4c;
            padding-bottom: 10px;
            margin-bottom: 25px;
        }
        #diyalogAlani {
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #fcf8e3;
            min-height: 150px;
        }
        .soru-metni {
            font-size: 1.1em;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 15px;
        }
        button.cevap-btn {
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            border: 1px solid #9b59b6;
            background-color: #9b59b6;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button.cevap-btn:hover {
            background-color: #8e44ad;
        }
        .secenek-butonu {
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            border: 2px solid #3498db;
            background-color: #f2faff;
            color: #3498db;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            font-weight: bold;
        }
        .secenek-butonu:hover {
            background-color: #3498db;
            color: white;
        }
        #sonucAlani {
            margin-top: 25px;
            padding: 20px;
            border: 2px solid #2ecc71;
            border-radius: 8px;
            background-color: #e8f8f5;
        }
        .analiz-baslik {
            color: #34495e;
            font-weight: bold;
            margin-top: 10px;
        }
        input[type="text"] {
            width: 98%; 
            padding: 8px; 
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #telifHakk覺 {
            margin-top: 20px;
            text-align: center;
            font-size: 0.8em;
            color: #7f8c8d;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1> Eggapps | Sallama Dedektifi: ULTRA SRM (V1.4.4)</h1>
        
        <div id="diyalogAlani">
            <div class="soru-metni" id="soruMetni"></div>
            <div id="cevapSecenekleri"></div>
        </div>

        <div id="sonucAlani" style="display:none;">
            <h2>Dedektif Tahmini</h2>
            <p><strong>En Olas覺 Cevap:</strong> <span id="tahminSik"></span></p>
            <p class="analiz-baslik">Kullan覺lan Kurallar ve Analiz:</p>
            <ul id="analizListesi"></ul>
            <button class="cevap-btn" onclick="baslat()">Yeniden Bala</button>
        </div>
        
        <div id="telifHakk覺">
            &copy; 2025 Eggapps Telif Hakk覺. T羹m haklar覺 sakl覺d覺r.
        </div>
    </div>

    <script>
        let state = 0;
        let secimler = {};
        const Harfler = ["A", "B", "C", "D", "E"];
        
        const sorular = [
            // 0: 覺k Say覺s覺
            { id: 0, soru: "Soru ka癟 覺kl覺? (Cevap: 4 veya 5)", sonraki: 1, key: 'sik_sayisi', placeholder: "4 veya 5" },
            
            // 1: 覺k Tipi (BUTON)
            { id: 1, soru: "覺klar say覺sal m覺 yoksa metin mi i癟eriyor?", sonraki: 2, key: 'tip', secenekler: [{text: "Say覺sal", value: "SAYISAL"}, {text: "Metin", value: "MET襤N"}] },
            
            // 2: U癟 Eleme (BUTON)
            { id: 2, soru: "Say覺sal 覺klarda, en k羹癟羹k ve en b羹y羹k 覺k aras覺nda 癟ok b羹y羹k bir fark var m覺?", sonraki: 21, key: 'uc_eleme_var', secenekler: [{text: "Evet, var", value: "EVET"}, {text: "Hay覺r, yok", value: "HAYIR"}] },
            
            // 21: U癟 Olmayanlar (MET襤N G襤R襤襤)
            { id: 21, soru: "U癟 deer tuza覺 varsa: Hangi 覺klar u癟 deer **DE襤LD襤R** (ortada kalm覺t覺r)?", sonraki: 3, key: 'uc_olmayan_sik', placeholder: "rn: B VE C" },

            // 3: Nadir Kelimeler/Yuvarlak Say覺lar (BUTON)
            { id: 3, soru: "覺klardan biri '9.81' gibi teknik bir say覺 i癟erirken, dieri '10' gibi yuvarlak bir say覺 i癟eriyor mu?", sonraki: 31, key: 'teknik_sayi_var', secenekler: [{text: "Evet, i癟eriyor", value: "EVET"}, {text: "Hay覺r, i癟ermiyor", value: "HAYIR"}] }, 
            
            // 31: Teknik Say覺 Hangi 覺kta? (MET襤N G襤R襤襤)
            { id: 31, soru: "Hangi 覺k k羹suratl覺 teknik say覺y覺 i癟eriyor?", sonraki: 4, key: 'teknik_sayi_sik', placeholder: "A, B, C, D veya E" },

            // 4: Hepsi/T羹m羹 Kural覺 (BUTON)
            { id: 4, soru: "覺klardan biri 'Hepsi', 'T羹m羹' gibi kapsay覺c覺 ifadeler i癟eriyor mu?", sonraki: 5, key: 'hepsi_tumu_var', secenekler: [{text: "Evet, i癟eriyor", value: "EVET"}, {text: "Hay覺r, i癟ermiyor", value: "HAYIR"}] },
            
            // 5: Hangi 覺k Hepsi/T羹m羹 襤癟eriyor? (MET襤N G襤R襤襤)
            { id: 5, soru: "Hangi 覺k, 'Hepsi/T羹m羹' ifadesini i癟eriyor?", sonraki: 6, key: 'hepsi_tumu_sik', placeholder: "A, B, C, D veya E" },
            
            // 6: A覺r覺 Genelleme/K覺s覺tlama (MET襤N G襤R襤襤)
            { id: 6, soru: "Hangi 覺klar 'yaln覺zca', 'mutlak', 'tek nedeni' gibi 癟ok k覺s覺tlay覺c覺 kelimeler i癟eriyor?", sonraki: 7, key: 'kisitlayici', placeholder: "A, B, D veya H襤B襤R襤" },

            // 7: eliki Kural覺 (MET襤N G襤R襤襤)
            { id: 7, soru: "Hangi ikisi birbirine tamamen z覺t ve 癟elien ifade i癟eriyor?", sonraki: 8, key: 'celiski', placeholder: "A VE E veya H襤B襤R襤" },

            // 8: Destek Tuza覺 Kural覺 (MET襤N G襤R襤襤)
            { id: 8, soru: "Hangi iki 覺k ayn覺 fikri farkl覺 kelimelerle destekliyor?", sonraki: 9, key: 'destek', placeholder: "C VE D veya H襤B襤R襤" },

            // 9: ifte 襤sim Tuza覺 (BUTON)
            { id: 9, soru: "覺klardan biri '襤ki olay覺/kiiyi' ayn覺 anda i癟eriyor mu?", sonraki: 11, key: 'cifte_isim', secenekler: [{text: "Evet, i癟eriyor", value: "EVET"}, {text: "Hay覺r, i癟ermiyor", value: "HAYIR"}] }
        ];
        
        const soruMap = {};
        sorular.forEach(s => soruMap[s.id] = s);

        // --- GSTER襤M VE 襤LERLEME FONKS襤YONLARI ---

        function gosterSoru(id) {
            state = id;
            
            if (id === 11) { finalTahmin(); return; } 
            
            const s = soruMap[id];
            
            // --- AKI KONTROL ---
            // Metinse Say覺sal sorular覺 atla
            if (secimler.tip === "MET襤N" && (id >= 2 && id <= 31)) { gosterSoru(4); return; } 
            
            // U癟 Eleme Yoksa, Soru 21'i atla
            if (secimler.uc_eleme_var === "HAYIR" && id === 21) { gosterSoru(3); return; }

            // Teknik Say覺 Yoksa, Soru 31'i atla
            if (secimler.teknik_sayi_var === "HAYIR" && id === 31) { gosterSoru(4); return; }

            // Hepsi/T羹m羹 Yoksa, Soru 5'i atla
            if (secimler.hepsi_tumu_var === "HAYIR" && id === 5) { gosterSoru(6); return; }
            
            if (!s) { return; } 

            document.getElementById('soruMetni').textContent = s.soru;
            
            const cevapSecenekleri = document.getElementById('cevapSecenekleri');
            cevapSecenekleri.innerHTML = '';
            
            if (s.secenekler) {
                // BUTONLU SEENEKLER
                s.secenekler.forEach(secenek => {
                    const btn = document.createElement('button');
                    btn.className = 'secenek-butonu';
                    btn.textContent = secenek.text;
                    btn.onclick = () => cevaplaButon(secenek.value, s.key, s.sonraki);
                    cevapSecenekleri.appendChild(btn);
                });
            } else {
                // MET襤N G襤R襤L襤 SEENEKLER
                cevapSecenekleri.innerHTML = `
                    <input type="text" id="cevapInput" placeholder="${s.placeholder}" onkeyup="if(event.key === 'Enter') { cevaplaMetin(); }">
                    <button class="cevap-btn" onclick="cevaplaMetin()">Tamam</button>
                `;
                document.getElementById('cevapInput').focus();
            }
        }
        
        function cevaplaButon(cevap, key, sonraki) {
            secimler[key] = cevap;
            gosterSoru(sonraki);
        }


        function cevaplaMetin() {
            const mevcutSoru = soruMap[state];
            let cevap = document.getElementById('cevapInput').value.trim().toUpperCase();
            
            if (!cevap) { alert("L羹tfen bir cevap girin."); return; }

            // --- ZEL KONTROLLER ---

            // Soru 0: 覺k Say覺s覺
            if (mevcutSoru.key === 'sik_sayisi') {
                 if (cevap !== '4' && cevap !== '5') { alert("覺k say覺s覺 4 veya 5 olmal覺d覺r."); return; }
                 secimler[mevcutSoru.key] = parseInt(cevap); 
            }
            // Tek 覺k Cevaplar覺 (rn: Hepsi/T羹m羹 覺kk覺, Teknik Say覺 覺kk覺)
            else if (mevcutSoru.key === 'hepsi_tumu_sik' || mevcutSoru.key === 'teknik_sayi_sik') {
                 if (!Harfler.slice(0, secimler.sik_sayisi).includes(cevap)) { alert("Ge癟erli bir 覺k harfi girin."); return; }
                 secimler[mevcutSoru.key] = cevap;
            }
            // Dier oklu 覺k Cevaplar覺
            else {
                 secimler[mevcutSoru.key] = cevap;
            }
            
            // T羹m kontrollerden ge癟tikten sonra ilerle
            gosterSoru(mevcutSoru.sonraki);
        }

        function finalTahmin() {
            const sikSayisi = secimler.sik_sayisi;
            if (!sikSayisi) { alert("覺k say覺s覺 bilgisi al覺namad覺. L羹tfen yeniden balay覺n."); return; }
            const HarfSecenekleri = Harfler.slice(0, sikSayisi);
            let tahminPuani = new Array(sikSayisi).fill(0);
            let analizler = [];

            // 1. 襤STAT襤ST襤KSEL MERKEZ E襤L襤M襤
            if (sikSayisi === 4) {
                tahminPuani[1] += 3; tahminPuani[2] += 5; 
                analizler.push("Merkez Eilimi: B 覺kk覺na (+3), C 覺kk覺na (+5) puan verildi.");
            } else if (sikSayisi === 5) {
                tahminPuani[1] += 3; tahminPuani[2] += 5; tahminPuani[3] += 3; 
                analizler.push("Merkez Eilimi: C 覺kk覺 (+5), B ve D 覺klar覺 (+3) puan ald覺.");
            }
            
            // --- 2. KULLANILAN KURALLARA GRE PUANLAMA ---
            
            // 2.7. U癟 Eleme Kural覺 (Soru 2 ve 21)
            if (secimler.tip === "SAYISAL" && secimler.uc_eleme_var === "EVET" && secimler.uc_olmayan_sik) {
                 const ucOlmayanCevap = secimler.uc_olmayan_sik; 
                 const ucOlmayanHarfler = ucOlmayanCevap.split(/ VE |, /).map(h => h.trim());
                 
                 ucOlmayanHarfler.forEach(harf => {
                    const harfIndex = HarfSecenekleri.indexOf(harf);
                    if (harfIndex !== -1) {
                        tahminPuani[harfIndex] += 5; 
                        analizler.push("U癟 Eleme Kural覺: 覺k " + harf + " (Ortada kald覺覺 i癟in) (+5) puan ald覺.");
                    }
                 });
            }
            
            // 2.6. Nadir Kelimeler Kural覺 (Soru 3 ve 31)
            if (secimler.tip === "SAYISAL" && secimler.teknik_sayi_var === "EVET" && secimler.teknik_sayi_sik) {
                 const teknikHarf = secimler.teknik_sayi_sik;
                 const teknikIndex = HarfSecenekleri.indexOf(teknikHarf);
                 if (teknikIndex !== -1) {
                     tahminPuani[teknikIndex] += 8;
                     analizler.push("Nadir Kelimeler (Say覺sal): Teknik say覺 i癟eren 覺k (" + teknikHarf + ") (+8) puan ald覺.");
                 }
            }


            // Dier Kural Uygulamalar覺 (Deimedi)
            // Hepsi/T羹m羹 Kural覺 (2.1)
            if (secimler.hepsi_tumu_var === "EVET" && secimler.hepsi_tumu_sik) {
                const kapsayiciHarf = secimler.hepsi_tumu_sik;
                const kapsayiciIndex = HarfSecenekleri.indexOf(kapsayiciHarf);
                if (kapsayiciIndex !== -1) {
                    tahminPuani[kapsayiciIndex] += 15;
                    analizler.push("Hepsi/T羹m羹 Kural覺: 覺k " + kapsayiciHarf + " (+15) puan ald覺.");
                }
            }

            // A覺r覺 Genelleme Elemesi (2.2)
            const kesinlikCevabi = secimler.kisitlayici; 
            if (kesinlikCevabi && kesinlikCevabi !== "H襤B襤R襤") {
                const kesinlikHarfleri = kesinlikCevabi.split(',').map(h => h.trim());
                kesinlikHarfleri.forEach(harf => {
                    const kesinlikIndex = HarfSecenekleri.indexOf(harf);
                    if (kesinlikIndex !== -1) {
                        tahminPuani[kesinlikIndex] -= 10; 
                        analizler.push("A覺r覺 Genelleme Elemesi: 覺k " + harf + " (Mutlak ifade i癟erdii i癟in) (-10) puan kaybetti.");
                    }
                });
            }

            // eliki Kural覺 (2.3)
            const celiskiCevabi = secimler.celiski; 
            if (celiskiCevabi && celiskiCevabi !== "H襤B襤R襤") {
                const harfler = celiskiCevabi.split('VE').map(h => h.trim()); 
                const index1 = HarfSecenekleri.indexOf(harfler[0].trim());
                const index2 = HarfSecenekleri.indexOf(harfler[1].trim());
                if (index1 !== -1 && index2 !== -1) {
                    tahminPuani[index1] += 10;
                    tahminPuani[index2] += 10;
                    analizler.push("eliki Kural覺: " + harfler[0].trim() + " ve " + harfler[1].trim() + " 覺klar覺 birbirini 癟羹r羹tt羹羹 i癟in (+10) puan ald覺.");
                }
            }
            
            // Destek Tuza覺 Kural覺 (2.4)
            const destekCevabi = secimler.destek; 
            if (destekCevabi && destekCevabi !== "H襤B襤R襤") {
                const harfler = destekCevabi.split('VE').map(h => h.trim()); 
                const index1 = HarfSecenekleri.indexOf(harfler[0].trim());
                const index2 = HarfSecenekleri.indexOf(harfler[1].trim());
                if (index1 !== -1 && index2 !== -1) {
                    tahminPuani[index1] -= 5; 
                    tahminPuani[index2] -= 5;
                    analizler.push("Destek Tuza覺 Kural覺: " + harfler[0].trim() + " ve " + harfler[1].trim() + " 覺klar覺 birbirini destekledii i癟in (-5) puan kaybetti.");
                }
            }

            // ifte 襤sim Tuza覺 (2.5)
            if (secimler.cifte_isim === "EVET") {
                 if (sikSayisi >= 3) {
                     tahminPuani[1] += 5; tahminPuani[2] += 5; 
                     analizler.push("ifte 襤sim Tuza覺: B ve C 覺klar覺na (+5) puan verildi.");
                 }
            }


            // 3. SONU HESAPLAMA
            let maxPuan = -Infinity;
            let esitPuanlar = [];
            
            tahminPuani.forEach((puan, index) => {
                if (puan > maxPuan) {
                    maxPuan = puan;
                    esitPuanlar = [HarfSecenekleri[index]];
                } else if (puan === maxPuan && maxPuan !== -Infinity) {
                    esitPuanlar.push(HarfSecenekleri[index]);
                }
            });

            let tahminSik = (esitPuanlar.length > 1) ? esitPuanlar.join(" ve ") + " (Eitlik)" : esitPuanlar[0];

            // Sonucu g繹sterme
            document.getElementById('tahminSik').textContent = tahminSik + " (Puan: " + maxPuan + ")";
            
            const analizListesi = document.getElementById('analizListesi');
            analizListesi.innerHTML = '';
            
            // Puan Tablosu Ekle
            let puanTablosu = 'Puan Durumu: ';
            HarfSecenekleri.forEach((harf, index) => {
                puanTablosu += `${harf}: ${tahminPuani[index]}, `;
            });
            analizler.push(puanTablosu.slice(0, -2));

            analizler.forEach(a => {
                const li = document.createElement('li');
                li.textContent = a;
                analizListesi.appendChild(li);
            });
            
            if (analizler.length === 1 && analizler[0].startsWith('Puan Durumu')) { 
                 analizListesi.innerHTML = "<li>Yeterli ipucu edinilemedii i癟in sadece Merkez Eilimi Kural覺 uyguland覺.</li>" + analizListesi.innerHTML;
            }

            document.getElementById('diyalogAlani').style.display = 'none';
            document.getElementById('sonucAlani').style.display = 'block';
        }

        function baslat() {
            secimler = {};
            document.getElementById('diyalogAlani').style.display = 'block';
            document.getElementById('sonucAlani').style.display = 'none';
            gosterSoru(0);
        }

        window.onload = baslat;
    </script>

</body>
</html>
